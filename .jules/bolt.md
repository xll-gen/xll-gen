## 2024-05-23 - [Intermediate Structure for Command Batching]
**Learning:** In the generated Go server, `flushBuffers` was serializing batched updates (Greedy Mesh results) into temporary FlatBuffers `[]byte` stored in a queue, which were then immediately deserialized and re-serialized into the final response in `flushCommands`. This "Double Serialization" caused unnecessary allocations (Builder + Bytes) and CPU overhead (Serialize + Deserialize + Serialize).
**Action:** Introduced intermediate fields in `QueuedCommand` to store the raw Go structs (`Rects`, `ScalarValue`) instead of bytes. Modified `flushBuffers` to store these structs, and `flushCommands` to serialize them directly into the final response builder. This eliminates the intermediate FlatBuffer entirely for the optimized path, saving allocations and cycles. Future optimizations should look for similar "serialize-store-deserialize" patterns in batched operations.
